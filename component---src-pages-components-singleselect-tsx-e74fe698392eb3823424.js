"use strict";(self.webpackChunksuomifi_design_system=self.webpackChunksuomifi_design_system||[]).push([[386],{94798:function(e,t,n){n.d(t,{k:function(){return O}});var o=n(4942),r=n(45987),l=n(15671),i=n(43144),a=n(60136),u=n(82963),c=n(61120),s=n(67294),d=n(97166),f=n(69931),p=n.n(f),m=n(75503),I=n(50222),h=n(26630),v=n(46248),b=["className","label","theme","onClick"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,c.Z)(e);if(t){var r=(0,c.Z)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return(0,u.Z)(this,n)}}var y="fi-input-clear-button",T={icon:"".concat(y,"_icon")},Z=function(e){(0,a.Z)(n,e);var t=x(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.label;e.theme;var o=e.onClick,l=(0,r.Z)(e,b);return s.createElement(I.S,w(w({},l),{},{className:p()(y,t),onClick:o}),s.createElement(h.T,null,n),s.createElement(v.JO,{"aria-hidden":!0,icon:"close",className:T.icon}))}}]),n}(s.Component),S=(0,d.default)(Z).withConfig({componentId:"sc-1df7mt5-0"})(["",""],(function(e){return function(e){return(0,d.css)(["position:relative;cursor:pointer;pointer-events:all;height:20px;width:20px;justify-content:center;align-items:center;&:focus{outline:none;&:after{","}}&.fi-input-clear-button{display:flex;& .fi-input-clear-button_icon{width:16px;height:16px;& .fi-icon-base-fill{fill:",";}}&[disabled],&:disabled{cursor:not-allowed;& .fi-input-clear-button_icon{& .fi-icon-base-fill{fill:",";}}}}"],e.focus.absoluteFocus,e.colors.highlightDark1,e.colors.depthBase)}(e.theme)})),O=function(e){return s.createElement(m.cY,null,(function(t){var n=t.suomifiTheme;return s.createElement(S,w({theme:n},e))}))};O.displayName="InputClearButton"},40787:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var o=n(67294),r=n(35291),l=n(15083),i=n(10719),a=n(92167),u=n(93024),c=n(39657),s=n(39497),d=n(45786),f=n(91971),p=n(72568),m=n(28117),I=n(45987),h=n(15671),v=n(43144),b=n(97326),g=n(60136),w=n(82963),x=n(61120),y=n(4942),T=n(97166),Z=n(69931),S=n.n(Z),O=n(22690),k=n(86407),P=n(49229),E=n(54384),R=n(25707),C=n(75503),D=n(94790),q=n(26630),j=n(94798),A=n(53652),B=n(80960),_=n(99824),L=n(97146),N=n(42137),V=n(14735),M=["id","className","theme","labelText","optionalText","hintText","onItemSelectionChange","visualPlaceholder","noItemsText","defaultSelectedItem","onChange","onBlur","debounce","status","statusText","selectedItem","clearButtonLabel","ariaOptionsAvailableText","onItemSelect","disabled","allowItemAddition","itemAdditionHelpText","items"],F=["id"];function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,x.Z)(e);if(t){var r=(0,x.Z)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return(0,w.Z)(this,n)}}var W="fi-single-select",Q={valueSelected:"".concat(W,"--value-selected"),clearButtonWrapper:"".concat(W,"_clear-button_wrapper"),open:"".concat(W,"--open"),error:"".concat(W,"--error"),queryHighlight:"".concat(W,"-item--query_highlight")},U=function(e){(0,g.Z)(n,e);var t=J(n);function n(e){var r,l,i;return(0,h.Z)(this,n),i=t.call(this,e),(0,y.Z)((0,b.Z)(i),"popoverListRef",void 0),(0,y.Z)((0,b.Z)(i),"filterInputRef",void 0),(0,y.Z)((0,b.Z)(i),"toggleButtonRef",void 0),(0,y.Z)((0,b.Z)(i),"clearButtonRef",void 0),(0,y.Z)((0,b.Z)(i),"preventShowPopoverOnInputFocus",!1),(0,y.Z)((0,b.Z)(i),"state",{filterInputValue:null!==(r=i.props.selectedItem)&&void 0!==r&&r.labelText?i.props.selectedItem.labelText:(null===(l=i.props.defaultSelectedItem)||void 0===l?void 0:l.labelText)||"",filteredItems:i.props.items,filterMode:!1,showPopover:!1,focusedDescendantId:null,selectedItem:i.props.selectedItem?i.props.selectedItem:i.props.defaultSelectedItem||null,initialItems:i.props.items,computedItems:i.props.items}),(0,y.Z)((0,b.Z)(i),"filter",(function(e,t){return e.labelText.toLowerCase().includes(t.toLowerCase())})),(0,y.Z)((0,b.Z)(i),"handleBlur",(function(){i.props.onBlur&&i.props.onBlur();var e=(0,k.r3)(i.popoverListRef);e&&requestAnimationFrame((function(){var t,n,o=null===(t=i.popoverListRef.current)||void 0===t?void 0:t.contains(e.activeElement),r=null===(n=i.toggleButtonRef.current)||void 0===n?void 0:n.contains(e.activeElement),l=e.activeElement===i.filterInputRef.current,a=o||l||r;a||i.setState((function(e){var t;return{filterInputValue:(null===(t=e.selectedItem)||void 0===t?void 0:t.labelText)||"",filterMode:!1,showPopover:a,focusedDescendantId:null}}))}))})),(0,y.Z)((0,b.Z)(i),"handleOnChange",(function(e){i.setState((function(t){var n;return{filterInputValue:t.filterMode||!t.selectedItem?e:e.replace(new RegExp("^".concat((0,k.fA)((null===(n=t.selectedItem)||void 0===n?void 0:n.labelText)||""))),""),showPopover:!0,filterMode:!0}}))})),(0,y.Z)((0,b.Z)(i),"focusToInputAndSelectText",(function(){i.filterInputRef&&i.filterInputRef.current&&(i.filterInputRef.current.focus(),setTimeout((function(){var e;return null===(e=i.filterInputRef.current)||void 0===e?void 0:e.select()}),100))})),(0,y.Z)((0,b.Z)(i),"focusToInputAndCloseMenu",(function(){i.focusToInputAndSelectText(),i.setState({showPopover:!1,filterMode:!1,focusedDescendantId:null})})),(0,y.Z)((0,b.Z)(i),"handleItemSelection",(function(e){if(null===e||!e.disabled){var t=i.props,n=t.onItemSelect,o=t.onItemSelectionChange;if(t.selectedItem)i.setState((function(e){var t;return{filterInputValue:(null===(t=e.selectedItem)||void 0===t?void 0:t.labelText)||""}}));else{var r=[];if(null!==e)i.props.items.some((function(t){return t.uniqueItemId===e.uniqueItemId}))||r.push(e);i.setState({selectedItem:e||null,filterInputValue:(null==e?void 0:e.labelText)||"",focusedDescendantId:null,computedItems:i.props.items.concat(r)})}n&&n((null==e?void 0:e.uniqueItemId)||null),o&&o(e),i.focusToInputAndCloseMenu()}})),(0,y.Z)((0,b.Z)(i),"handleKeyDown",(function(e){var t=i.state,n=t.filteredItems,o=t.focusedDescendantId,r=t.filterMode,l=t.filterInputValue,a=r?n:i.state.computedItems,u=o?a.findIndex((function(e){return e.uniqueItemId===o})):null;switch(e.key){case"ArrowDown":i.state.showPopover||i.setState({showPopover:!0});var c=!i.props.allowItemAddition||u!==a.length-1&&0!==a.length||""===l||i.inputValueInItems()?a[null!==u?(u+1)%a.length:0]:{uniqueItemId:l.toLowerCase(),labelText:l};c&&i.setState({focusedDescendantId:c.uniqueItemId});break;case"ArrowUp":i.state.showPopover||i.setState({showPopover:!0});var s=!i.props.allowItemAddition||null!==u&&0!==u||""===l||i.inputValueInItems()?a[null!==u&&-1!==u?(u-1+a.length)%a.length:a.length-1]:{uniqueItemId:l.toLowerCase(),labelText:l};s&&i.setState({focusedDescendantId:s.uniqueItemId});break;case"Enter":if(e.preventDefault(),o){var d=a.find((function(e){return e.uniqueItemId===o}));if(d)i.handleItemSelection(d);else{var f={uniqueItemId:l.toLowerCase(),labelText:l};i.handleItemSelection(f)}}break;case"Escape":i.state.showPopover&&e.stopPropagation(),i.state.selectedItem||i.setState({filterInputValue:""}),i.focusToInputAndCloseMenu()}})),(0,y.Z)((0,b.Z)(i),"inputValueInItems",(function(){return!!i.state.computedItems.find((function(e){return e.uniqueItemId===i.state.filterInputValue.toLowerCase()||e.labelText.toLowerCase()===i.state.filterInputValue.toLowerCase()}))})),i.popoverListRef=o.createRef(),i.filterInputRef=o.createRef(),i.toggleButtonRef=o.createRef(),i.clearButtonRef=o.createRef(),i}return(0,v.Z)(n,[{key:"componentDidUpdate",value:function(e){JSON.stringify(this.props.items)!==JSON.stringify(e.items)&&this.setState({computedItems:this.props.items})}},{key:"isOutsideClick",value:function(e){return!!this.toggleButtonRef&&this.toggleButtonRef.current.contains(e.target)}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.filteredItems,l=n.filterMode,i=n.showPopover,a=n.focusedDescendantId,u=n.filterInputValue,c=n.selectedItem,s=n.computedItems,d=this.props,f=d.id,p=d.className;d.theme;var m=d.labelText,h=d.optionalText,v=d.hintText;d.onItemSelectionChange;var b=d.visualPlaceholder,g=d.noItemsText;d.defaultSelectedItem;var w=d.onChange;d.onBlur;var x=d.debounce,T=d.status,Z=d.statusText;d.selectedItem;var k=d.clearButtonLabel,P=d.ariaOptionsAvailableText;d.onItemSelect;var C=d.disabled,N=d.allowItemAddition,F=d.itemAdditionHelpText;d.items;var K=(0,I.Z)(d,M),J=a?"".concat(f,"-").concat(a):"",U="".concat(f,"-popover"),Y=l?r:s;return o.createElement(O.h,H(H({},K),{},{className:S()(W,p,(e={},(0,y.Z)(e,Q.valueSelected,!!c),(0,y.Z)(e,Q.open,i),(0,y.Z)(e,Q.error,"error"===T),e))}),o.createElement(E.K,{waitFor:x},(function(e){return o.createElement(D.H,{inputElementContainerProps:{role:"combobox","aria-haspopup":"listbox","aria-owns":U,"aria-expanded":i},"aria-activedescendant":J,id:f,"aria-controls":U,labelText:m,optionalText:h,hintText:v,items:s,onFilter:function(e){t.state.filterMode&&t.setState((function(t){var n=t.focusedDescendantId;return e.some((function(e){return e.uniqueItemId===n}))||(n=null),{filteredItems:e,focusedDescendantId:n}}))},filterFunc:t.filter,forwardedRef:t.filterInputRef,onFocus:function(){t.preventShowPopoverOnInputFocus||t.setState({showPopover:!0}),t.preventShowPopoverOnInputFocus=!1},onClick:function(){t.focusToInputAndSelectText(),t.setState({showPopover:!0})},onKeyDown:t.handleKeyDown,onBlur:t.handleBlur,value:u,onChange:function(n){w&&e(w,n),t.handleOnChange(n)},visualPlaceholder:c?"":b,status:T,statusText:Z,disabled:C},!!c&&o.createElement(O.h,{className:Q.clearButtonWrapper},o.createElement(j.k,{forwardedRef:t.clearButtonRef,onClick:function(){return t.handleItemSelection(null)},onBlur:t.handleBlur,label:k,disabled:C})),o.createElement(L.e,{open:i,ref:t.toggleButtonRef,onClick:function(e){e.preventDefault(),t.setState((function(e){return{showPopover:!e.showPopover}})),t.preventShowPopoverOnInputFocus=!0,t.focusToInputAndSelectText()},"aria-hidden":!0,tabIndex:-1,disabled:C}))})),i&&o.createElement(R.J,{sourceRef:this.filterInputRef,matchWidth:!0,onKeyDown:this.handleKeyDown,onClickOutside:function(e){t.isOutsideClick(e)||t.setState({showPopover:!1})}},o.createElement(A.A,{id:U,ref:this.popoverListRef,focusedDescendantId:J},o.createElement(O.h,null,Y.length>0&&Y.map((function(e){var n,r=e.uniqueItemId===a;return o.createElement(B.Q,{hasKeyboardFocus:r,key:"".concat(e.uniqueItemId,"_").concat(e.uniqueItemId===(null==c?void 0:c.uniqueItemId)),id:"".concat(f,"-").concat(e.uniqueItemId),checked:e.uniqueItemId===(null==c?void 0:c.uniqueItemId),disabled:e.disabled,onClick:function(){t.handleItemSelection(e)},hightlightQuery:l?null===(n=t.filterInputRef.current)||void 0===n?void 0:n.value:""},e.labelText)})),0===Y.length&&!N&&o.createElement(_.q,null,g),""!==u&&!this.inputValueInItems()&&N&&o.createElement(V.p,{hintText:F,hasKeyboardFocus:u===a,id:"".concat(f,"-").concat(u.toLowerCase()),onClick:function(){var e={labelText:u,uniqueItemId:u.toLowerCase()};t.handleItemSelection(e)}},u)))),this.state.filterMode&&o.createElement(q.T,{"aria-live":"polite","aria-atomic":"true"},"".concat(Y.length," ").concat(P)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,o=e.items,r=e.selectedItem,l="selectedItem"in e&&(null==r?void 0:r.uniqueItemId)!==(null===(n=t.selectedItem)||void 0===n?void 0:n.uniqueItemId);return l||o!==t.initialItems?{selectedItem:"selectedItem"in e?r:t.selectedItem,filteredItems:o,filterInputValue:l?(null==r?void 0:r.labelText)||"":t.filterInputValue,filterMode:t.filterMode,initialItems:o}:null}}]),n}(o.Component),Y=(0,T.default)(U).withConfig({componentId:"sc-t1n3a2-0"})(["",""],(function(e){return function(e){return(0,T.css)([""," width:290px;&.fi-single-select{& .fi-filter-input_input{padding-right:36px;}&--value-selected{& .fi-filter-input_input{padding-right:73px;}}}&.fi-single-select--open{& .fi-filter-input_input{border-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0;}}"],(0,N.LZ)(e)("bodyText"))}(e.theme)})),z=function(e){var t=e.id,n=(0,I.Z)(e,F);return o.createElement(C.cY,null,(function(e){var r=e.suomifiTheme;return o.createElement(P.z,{id:t},(function(e){return o.createElement(Y,H({theme:r,id:e},n))}))}))};z.displayName="SingleSelect";var G=[{name:"Ammattiliikenne",labelText:"Ammattiliikenne",uniqueItemId:"jh2435626"},{name:"Ansiotulot",labelText:"Ansiotulot",uniqueItemId:"h9823523"},{name:"Asiakirja-_ja_tietopyynnöt",labelText:"Asiakirja- ja tietopyynnöt",uniqueItemId:"sh908293482"},{name:"asiakkuuden_hallinta",labelText:"Asiakkuuden hallinta",uniqueItemId:"s82502335"},{name:"asuminen_ja_rakentaminen",labelText:"Asuminen ja rakentaminen",disabled:!0,uniqueItemId:"ps9081231"},{name:"asunto_osakkeet",labelText:"Asunto-osakkeet",uniqueItemId:"ps9081298"}],X=function(){return o.createElement(l.Z,{sideNavData:a.Z},o.createElement(i.Z,{title:r.TN}),o.createElement(c.X6,{variant:"h1"},r.TN),o.createElement(p.Z,{notificationText:r._i}),o.createElement(c.nv,{variant:"lead"},o.createElement(c.xv,{variant:"lead"},r.mf)),o.createElement(d.Z,null,o.createElement(f.Z,{style:{marginBottom:m.R.spacing.s}},o.createElement(z,{labelText:r.Wj,hintText:r.gD,clearButtonLabel:r.rD,items:G,visualPlaceholder:r._8,noItemsText:r.mv,ariaOptionsAvailableText:r.dM}))),o.createElement(u.Z,{title:r.gG,items:r.TK}),r.NS.map((function(e,t){return o.createElement(s.Z,{key:t,mainTitle:e.title,paragraphs:e.paragraphs,links:e.links})})))}}}]);
//# sourceMappingURL=component---src-pages-components-singleselect-tsx-e74fe698392eb3823424.js.map