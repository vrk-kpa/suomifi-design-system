(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1715],{52278:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/singleselect",function(){return n(21840)}])},21840:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return se}});var l=n(85893),i=n(9008),o=n.n(i),a=n(37039),r=n(88466),s=n(91760),u=n(35424),c=n(67527),d=n(1292),p=n(4115),m=n(32594),f=n(10776),h=n(72119),I=n(89222),v=n(53760),g=n(86854),x=n(91),b=n(15671),_=n(43144),w=n(97326),T=n(60136),y=n(82963),S=n(61120),Z=n(4942),j=n(67294),R=n(19521),P=n(94184),C=n.n(P),k=n(27143),q=n(48180),O=n(35243),E=n(10076),A=n(22074),B=n(72465),D=n(1639),N=n(43146),M=n(54290),L=n(24997),V=n(44934),F=n(54279),W=n(29853),K=n(4606),X=n(66646),z=n(73429),H=n(2763),G=n(39870),J=["id","className","theme","labelText","optionalText","hintText","onItemSelectionChange","visualPlaceholder","noItemsText","defaultSelectedItem","onChange","onChangeWithoutDebounce","onBlur","debounce","loading","loadingText","status","statusText","selectedItem","clearButtonLabel","ariaOptionsAvailableText","ariaOptionsAvailableTextFunction","onItemSelect","disabled","allowItemAddition","itemAdditionHelpText","tooltipComponent","items","forwardedRef","listProps","style","fullWidth"],Q=["globalMargins"],U=["theme","globalMargins"],$=["id"];function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,l=(0,S.Z)(e);if(t){var i=(0,S.Z)(this).constructor;n=Reflect.construct(l,arguments,i)}else n=l.apply(this,arguments);return(0,y.Z)(this,n)}}var ne="fi-single-select",le={valueSelected:"".concat(ne,"--value-selected"),clearButtonWrapper:"".concat(ne,"_clear-button_wrapper"),open:"".concat(ne,"--open"),error:"".concat(ne,"--error"),queryHighlight:"".concat(ne,"-item--query_highlight"),fullWidth:"".concat(ne,"--full-width")},ie=function(e){(0,T.Z)(n,e);var t=te(n);function n(e){var l,i,o;return(0,b.Z)(this,n),o=t.call(this,e),(0,Z.Z)((0,w.Z)(o),"popoverListRef",void 0),(0,Z.Z)((0,w.Z)(o),"filterInputRef",void 0),(0,Z.Z)((0,w.Z)(o),"toggleButtonRef",void 0),(0,Z.Z)((0,w.Z)(o),"clearButtonRef",void 0),(0,Z.Z)((0,w.Z)(o),"preventShowPopoverOnInputFocus",!1),(0,Z.Z)((0,w.Z)(o),"state",{filterInputValue:null!==(l=o.props.selectedItem)&&void 0!==l&&l.labelText?o.props.selectedItem.labelText:(null===(i=o.props.defaultSelectedItem)||void 0===i?void 0:i.labelText)||"",filteredItems:o.props.items,filterMode:!1,showPopover:!1,focusedDescendantId:null,selectedItem:o.props.selectedItem?o.props.selectedItem:o.props.defaultSelectedItem||null,initialItems:o.props.items,computedItems:o.props.items}),(0,Z.Z)((0,w.Z)(o),"filter",(function(e,t){return e.labelText.toLowerCase().includes(t.toLowerCase())})),(0,Z.Z)((0,w.Z)(o),"handleBlur",(function(){o.props.onBlur&&o.props.onBlur();var e=(0,q.r3)(o.popoverListRef);e&&requestAnimationFrame((function(){var t,n,l=null===(t=o.popoverListRef.current)||void 0===t?void 0:t.contains(e.activeElement),i=null===(n=o.toggleButtonRef.current)||void 0===n?void 0:n.contains(e.activeElement),a=e.activeElement===o.filterInputRef.current,r=l||a||i;r||o.setState((function(e){var t;return{filterInputValue:(null===(t=e.selectedItem)||void 0===t?void 0:t.labelText)||"",filterMode:!1,showPopover:r,focusedDescendantId:null}}))}))})),(0,Z.Z)((0,w.Z)(o),"handleOnChange",(function(e){o.setState((function(t){var n;return{filterInputValue:t.filterMode||!t.selectedItem?e:e.replace(new RegExp("^".concat((0,q.fA)((null===(n=t.selectedItem)||void 0===n?void 0:n.labelText)||""))),""),showPopover:!0,filterMode:!0}}))})),(0,Z.Z)((0,w.Z)(o),"focusToInputAndSelectText",(function(){o.filterInputRef&&o.filterInputRef.current&&(o.filterInputRef.current.focus(),setTimeout((function(){var e;return null===(e=o.filterInputRef.current)||void 0===e?void 0:e.select()}),100))})),(0,Z.Z)((0,w.Z)(o),"focusToInputAndCloseMenu",(function(){o.focusToInputAndSelectText(),o.setState({showPopover:!1,filterMode:!1,focusedDescendantId:null})})),(0,Z.Z)((0,w.Z)(o),"handleItemSelection",(function(e){if(null===e||!e.disabled){var t=o.props,n=t.onItemSelect,l=t.onItemSelectionChange;if(t.selectedItem)o.setState((function(e){var t;return{filterInputValue:(null===(t=e.selectedItem)||void 0===t?void 0:t.labelText)||""}}));else{var i=[];if(null!==e)o.props.items.some((function(t){return t.uniqueItemId===e.uniqueItemId}))||i.push(e);o.setState({selectedItem:e||null,filterInputValue:(null===e||void 0===e?void 0:e.labelText)||"",focusedDescendantId:null,computedItems:o.props.items.concat(i)})}n&&n((null===e||void 0===e?void 0:e.uniqueItemId)||null),l&&l(e),o.focusToInputAndCloseMenu()}})),(0,Z.Z)((0,w.Z)(o),"handleKeyDown",(function(e){var t=o.state,n=t.filteredItems,l=t.focusedDescendantId,i=t.filterMode,a=t.filterInputValue,r=i?n:o.state.computedItems,s=l?r.findIndex((function(e){return e.uniqueItemId===l})):null;switch(e.key){case"ArrowDown":o.state.showPopover||o.setState({showPopover:!0});var u=!o.props.allowItemAddition||s!==r.length-1&&0!==r.length||""===a||o.inputValueInItems()?r[null!==s?(s+1)%r.length:0]:{uniqueItemId:a.toLowerCase(),labelText:a};u&&o.setState({focusedDescendantId:u.uniqueItemId});break;case"ArrowUp":o.state.showPopover||o.setState({showPopover:!0});var c=!o.props.allowItemAddition||null!==s&&0!==s||""===a||o.inputValueInItems()?r[null!==s&&-1!==s?(s-1+r.length)%r.length:r.length-1]:{uniqueItemId:a.toLowerCase(),labelText:a};c&&o.setState({focusedDescendantId:c.uniqueItemId});break;case"Enter":if(e.preventDefault(),l){var d=r.find((function(e){return e.uniqueItemId===l}));if(d)o.handleItemSelection(d);else{var p={uniqueItemId:a.toLowerCase(),labelText:a};o.handleItemSelection(p)}}break;case"Escape":o.state.showPopover&&e.stopPropagation(),o.state.selectedItem||o.setState({filterInputValue:""}),o.focusToInputAndCloseMenu()}})),(0,Z.Z)((0,w.Z)(o),"inputValueInItems",(function(){return!!o.state.computedItems.find((function(e){return e.uniqueItemId===o.state.filterInputValue.toLowerCase()||e.labelText.toLowerCase()===o.state.filterInputValue.toLowerCase()}))})),o.popoverListRef=j.createRef(),o.props.forwardedRef?o.filterInputRef=o.props.forwardedRef:o.filterInputRef=j.createRef(),o.toggleButtonRef=j.createRef(),o.clearButtonRef=j.createRef(),o}return(0,_.Z)(n,[{key:"componentDidUpdate",value:function(e){JSON.stringify(this.props.items)!==JSON.stringify(e.items)&&this.setState({computedItems:this.props.items})}},{key:"isOutsideClick",value:function(e){return!!this.toggleButtonRef&&this.toggleButtonRef.current.contains(e.target)}},{key:"render",value:function(){var e,t=this,n=this.state,l=n.filteredItems,i=n.filterMode,o=n.showPopover,a=n.focusedDescendantId,r=n.filterInputValue,s=n.selectedItem,u=n.computedItems,c=this.props,d=c.id,p=c.className;c.theme;var m=c.labelText,f=c.optionalText,h=c.hintText;c.onItemSelectionChange;var I=c.visualPlaceholder,v=c.noItemsText;c.defaultSelectedItem;var b=c.onChange,_=c.onChangeWithoutDebounce;c.onBlur;var w=c.debounce,T=c.loading,y=c.loadingText,S=c.status,R=c.statusText;c.selectedItem;var P=c.clearButtonLabel,q=c.ariaOptionsAvailableText,O=c.ariaOptionsAvailableTextFunction;c.onItemSelect;var B=c.disabled,D=c.allowItemAddition,H=c.itemAdditionHelpText,Q=c.tooltipComponent;c.items,c.forwardedRef;var U=c.listProps,$=c.style,Y=c.fullWidth,te=(0,x.Z)(c,J),ie=(0,N.Gu)(te),oe=(0,g.Z)(ie,2);oe[0];var ae=oe[1],re=a?"".concat(d,"-").concat(a):"",se="".concat(d,"-popover"),ue=i?l:u;return j.createElement(k.hh,ee(ee({},ae),{},{className:C()(ne,p,(e={},(0,Z.Z)(e,le.valueSelected,!!s),(0,Z.Z)(e,le.open,o),(0,Z.Z)(e,le.error,"error"===S),(0,Z.Z)(e,le.fullWidth,Y),e)),style:$}),j.createElement(E.K,{waitFor:w},(function(e){return j.createElement(M.H,{inputElementContainerProps:{role:"combobox","aria-haspopup":"listbox","aria-owns":se,"aria-expanded":o},"aria-activedescendant":re,id:d,"aria-controls":se,labelText:m,optionalText:f,hintText:h,items:u,onFilter:function(e){t.state.filterMode&&t.setState((function(t){var n=t.focusedDescendantId;return e.some((function(e){return e.uniqueItemId===n}))||(n=null),{filteredItems:e,focusedDescendantId:n}}))},filterFunc:t.filter,forwardedRef:t.filterInputRef,onFocus:function(){t.preventShowPopoverOnInputFocus||t.setState({showPopover:!0}),t.preventShowPopoverOnInputFocus=!1},onClick:function(){t.focusToInputAndSelectText(),t.setState({showPopover:!0})},onKeyDown:t.handleKeyDown,onBlur:t.handleBlur,value:r,onChange:function(n){b&&e(b,n),_&&_(n),t.handleOnChange(n)},visualPlaceholder:s?"":I,status:S,statusText:R,disabled:B,tooltipComponent:Q},!!s&&j.createElement(k.hh,{className:le.clearButtonWrapper},j.createElement(F.k,{forwardedRef:t.clearButtonRef,onClick:function(){return t.handleItemSelection(null)},onBlur:t.handleBlur,label:P,disabled:B})),j.createElement(z.e,{open:o,ref:t.toggleButtonRef,onClick:function(e){e.preventDefault(),t.setState((function(e){return{showPopover:!e.showPopover}})),t.preventShowPopoverOnInputFocus=!0,t.focusToInputAndSelectText()},"aria-hidden":!0,tabIndex:-1,disabled:B}))})),o&&j.createElement(A.$,{sourceRef:this.filterInputRef,matchWidth:!0,onKeyDown:this.handleKeyDown,onClickOutside:function(e){t.isOutsideClick(e)||t.setState({showPopover:!1})}},j.createElement(W.A,ee({id:se,ref:this.popoverListRef,focusedDescendantId:re},U),j.createElement(k.hh,null,ue.length>0&&!T&&ue.map((function(e){var n,l=e.uniqueItemId===a;return j.createElement(K.Q,ee({hasKeyboardFocus:l,key:"".concat(e.uniqueItemId,"_").concat(e.uniqueItemId===(null===s||void 0===s?void 0:s.uniqueItemId)),id:"".concat(d,"-").concat(e.uniqueItemId),checked:e.uniqueItemId===(null===s||void 0===s?void 0:s.uniqueItemId),disabled:e.disabled,onClick:function(){t.handleItemSelection(e)},hightlightQuery:i?null===(n=t.filterInputRef.current)||void 0===n?void 0:n.value:""},e.listItemProps),e.labelText)})),0===ue.length&&!D&&!T&&j.createElement(X.q,null,v),T&&j.createElement(X.q,{className:"loading"},j.createElement(L.T,{status:"loading",variant:"small",textAlign:"right",text:y})),""!==r&&!this.inputValueInItems()&&D&&!T&&j.createElement(G.p,{hintText:H,hasKeyboardFocus:r===a,id:"".concat(d,"-").concat(r.toLowerCase()),onClick:function(){var e={labelText:r,uniqueItemId:r.toLowerCase()};t.handleItemSelection(e)}},r)))),j.createElement(V.T,{"aria-live":"polite","aria-atomic":"true"},this.state.filterMode&&!T?O?O(ue.length):"".concat(ue.length," ").concat(q):""),j.createElement(V.T,{"aria-live":"polite","aria-atomic":"true",id:"".concat(d,"-loading-announce")},T?y:""))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,l=e.items,i=e.selectedItem,o="selectedItem"in e&&(null===i||void 0===i?void 0:i.uniqueItemId)!==(null===(n=t.selectedItem)||void 0===n?void 0:n.uniqueItemId);if(o||l!==t.initialItems){var a="selectedItem"in e?i:l.find((function(e){var n;return e.uniqueItemId===(null===(n=t.selectedItem)||void 0===n?void 0:n.uniqueItemId)})),r=t.filterInputValue;if(o)r=i?i.labelText||t.filterInputValue:"";else{var s=l.find((function(e){var n;return e.uniqueItemId===(null===(n=t.selectedItem)||void 0===n?void 0:n.uniqueItemId)}));s&&(r=s.labelText&&!t.filterMode?s.labelText:t.filterInputValue)}return{selectedItem:a,filteredItems:l,filterInputValue:r,filterMode:t.filterMode,initialItems:l}}return null}}]),n}(j.Component),oe=(0,R.ZP)((function(e){e.globalMargins;var t=(0,x.Z)(e,Q);return j.createElement(ie,ee({},t))})).withConfig({componentId:"sc-t1n3a2-0"})(["",""],(function(e){var t=e.theme,n=e.globalMargins,l=(0,x.Z)(e,U),i=(0,N.Gu)(l),o=(0,g.Z)(i,2),a=o[0];return o[1],function(e,t,n){return(0,R.iv)([""," "," "," "," width:290px;&.fi-single-select{& .fi-filter-input_input{padding-right:36px;}&--value-selected{& .fi-filter-input_input{padding-right:73px;}}&--full-width{width:100%;}}&.fi-single-select--open{& .fi-filter-input_input{border-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0;}}"],(0,H.LZ)(e)("bodyText"),(0,N._s)(t),(0,N._s)(n,!0),(0,H.oE)())}(t,(0,q.li)(n.singleSelect,a),a)}));function ae(e,t){var n=e.id,l=(0,x.Z)(e,$);return j.createElement(D.ON,null,(function(e){var i=e.margins;return j.createElement(B.cY,null,(function(e){var o=e.suomifiTheme;return j.createElement(O.z,{id:n},(function(e){return j.createElement(oe,ee({theme:o,id:e,globalMargins:i,forwardedRef:t},l))}))}))}))}var re=(0,j.forwardRef)(ae);re.displayName="SingleSelect";var se=function(){var e=(0,a.$G)().t;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o(),{children:(0,l.jsx)("title",{children:e("singleselect_page.site_title")})}),(0,l.jsxs)(r.Z,{navItems:s.t,navHeaderText:e("main_nav.components"),navIcon:"puzzle",children:[(0,l.jsx)(d.X,{variant:"h1",children:e("singleselect_page.heading")}),(0,l.jsx)(p.g,{variant:"div",mt:"m",mb:"l",children:(0,l.jsx)(m.d,{href:"https://vrk-kpa.github.io/suomifi-ui-components/#/Components/SingleSelect",labelNewWindow:e("common.opens_in_a_new_tab"),variant:"accent",children:e("common.see_technical_documentation_of_component")})}),(0,l.jsx)(f.P_,{closeText:e("common.close"),showCloseButton:!1,children:e("singleselect_page.accessibility")}),(0,l.jsx)(h.n,{className:"my-xl",children:(0,l.jsx)(I.x,{variant:"lead",children:e("singleselect_page.ingress")})}),(0,l.jsx)(c.Z,{style:{marginBottom:v.R.spacing.s},children:(0,l.jsx)(re,{labelText:e("singleselect_page.example.label_text"),hintText:e("singleselect_page.example.hint_text"),clearButtonLabel:e("singleselect_page.example.clear_button_label"),items:[{name:"Ammattiliikenne",labelText:"Ammattiliikenne",uniqueItemId:"jh2435626"},{name:"Ansiotulot",labelText:"Ansiotulot",uniqueItemId:"h9823523"},{name:"Asiakirja-_ja_tietopyynn\xf6t",labelText:"Asiakirja- ja tietopyynn\xf6t",uniqueItemId:"sh908293482"},{name:"asiakkuuden_hallinta",labelText:"Asiakkuuden hallinta",uniqueItemId:"s82502335"},{name:"asuminen_ja_rakentaminen",labelText:"Asuminen ja rakentaminen",disabled:!0,uniqueItemId:"ps9081231"},{name:"asunto_osakkeet",labelText:"Asunto-osakkeet",uniqueItemId:"ps9081298"}],visualPlaceholder:e("singleselect_page.example.visual_placeholder"),noItemsText:e("singleselect_page.example.noItemsText"),ariaOptionsAvailableText:e("singleselect_page.example.aria_options_available_text")})}),(0,l.jsx)(p.g,{variant:"section",className:"my-xl",children:(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(d.X,{variant:"h3",as:"h2",children:e("common.accessibility_and_usability")}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:e("singleselect_page.accessibility_list.point_1")}),(0,l.jsx)("li",{children:e("singleselect_page.accessibility_list.point_2")}),(0,l.jsx)("li",{children:e("singleselect_page.accessibility_list.point_3")}),(0,l.jsx)("li",{children:e("singleselect_page.accessibility_list.point_4")})]})]})}),(0,l.jsxs)(p.g,{variant:"section",children:[(0,l.jsx)(d.X,{variant:"h2",className:"mb-xl",children:e("singleselect_page.what_does_the_component_contain.heading")}),(0,l.jsx)(h.n,{className:"my-xl",children:e("singleselect_page.what_does_the_component_contain.text_1")}),(0,l.jsx)(h.n,{className:"my-xl",children:e("singleselect_page.what_does_the_component_contain.text_2")})]}),(0,l.jsxs)(p.g,{variant:"section",children:[(0,l.jsx)(d.X,{variant:"h2",className:"mb-xl",children:e("singleselect_page.size_and_usage.heading")}),(0,l.jsx)(h.n,{className:"my-xl",children:e("singleselect_page.size_and_usage.text_1")})]})]})]})}}},function(e){e.O(0,[3481,5912,5360,4202,5237,2003,776,1659,1550,9774,2888,179],(function(){return t=52278,e(e.s=t);var t}));var t=e.O();_N_E=t}]);